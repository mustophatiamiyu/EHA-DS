import{a as W,c as ct,P as y,_ as dt}from"./useCustom-xGDZc2V_.js";import{r as f,R as I}from"./index-BF9HgEP8.js";import{g as vt}from"./_stringToArray-C4YuUSC0.js";import{g as de}from"./_commonjsHelpers-Cpj98o6Y.js";import{c as Re,o as ue,g as et,a as ee,i as H}from"./Button-DXg0bdqQ.js";import{r as mt,a as gt,R as pt,O as tt,F as ht,u as Et}from"./Fade-fCFdpxve.js";import{c as rt}from"./index-BEUhGoCT.js";import{g as te,a as ce}from"./Transition-D-KE_6Hy.js";import{g as F,a as yt}from"./addStyle-mw_AB0Sp.js";import{r as nt}from"./_baseIteratee-CZnMOZP4.js";import{k as Ot}from"./kebabCase-52mGmbCP.js";import{K as Ct}from"./index-IiQ3Jng6.js";import{m as be}from"./mergeRefs-Dstv1IRw.js";import{i as bt}from"./ReactChildren-BEZRcJZl.js";import{u as wt}from"./get-DoBpDxvC.js";import{c as Y}from"./createChainedFunction-DrOnF2ID.js";function Tt(e){return(e==null?void 0:e.button)===0}function xt(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e!=null&&e.shiftKey)}function Pt(e,t){var r=t.disabled,u=t.triggerTarget,n=t.overlayTarget,m=t.listenEscape,T=m===void 0?!0:m,C=f.useCallback(function(a){T&&a.key===Ct.ESC&&(e==null||e(a))},[T,e]),v=f.useCallback(function(a){var i=te(u),o=te(n);i&&Re(i,a.target)||o&&Re(o,a.target)||xt(a)||!Tt(a)||e==null||e(a)},[e,u,n]);f.useEffect(function(){var a=te(u);if(!(r||!a)){var i=ue(a),o=ce(i,"mousedown",v,!0),d=ce(i,"keyup",C);return function(){o==null||o.off(),d==null||d.off()}}},[u,r,e,v,C])}function kt(e,t){return e=typeof e=="function"?e():e,e||t}function oe(e,t){var r=et(e),u=e.scrollTop,n=0;return r&&(u=r.pageYOffset,n=r.pageXOffset),t!==void 0&&(r?r.scrollTo(n,t):e.scrollTop=t),u}function ae(e,t){var r=et(e),u=e.scrollLeft,n=0;return r&&(u=r.pageXOffset,n=r.pageYOffset),t!==void 0&&(r?r.scrollTo(t,n):e.scrollLeft=t),u}function Be(e){var t;return(e==null?void 0:e.nodeName)&&(e==null||(t=e.nodeName)===null||t===void 0?void 0:t.toLowerCase())}function Mt(e){for(var t=ue(e),r=e==null?void 0:e.offsetParent;r&&Be(e)!=="html"&&F(r,"position")==="static";)r=r.offsetParent;return r||t.documentElement}function Lt(e,t,r){r===void 0&&(r=!0);var u={top:0,left:0},n=null;if(F(e,"position")==="fixed")n=e.getBoundingClientRect();else{if(t=t||Mt(e),n=ee(e),Be(t)!=="html"){var m=ee(t);m&&(u.top=m.top,u.left=m.left)}u.top+=parseInt(F(t,"borderTopWidth"),10)-oe(t)||0,u.left+=parseInt(F(t,"borderLeftWidth"),10)-ae(t)||0}if(n){var T=r&&parseInt(F(e,"marginTop"),10)||0,C=r&&parseInt(F(e,"marginLeft"),10)||0;return W({},n,{top:n.top-u.top-T,left:n.left-u.left-C})}return null}var St=function(t){return(t==null?void 0:t.nodeType)===1&&typeof(t==null?void 0:t.nodeName)=="string"};function dr(e,t){return t===void 0&&(t=!1),typeof e=="string"?(t&&(e=e.replace(/left|right/,function(r){return r==="left"?"right":"left"})),e.replace(/Left|Top/,"Start").replace(/Right|Bottom/,"End")):e}var _t=function(t,r){var u=f.useRef(!0);f.useEffect(function(){if(u.current){u.current=!1;return}t()},r)},we,$e;function Rt(){if($e)return we;$e=1;function e(t){return t==null}return we=e,we}var Bt=Rt();const X=de(Bt);var Te,Ae;function Dt(){if(Ae)return Te;Ae=1;function e(t){return t===void 0}return Te=e,Te}var It=Dt();const Ke=de(It);var xe,ze;function it(){if(ze)return xe;ze=1;var e=ct();function t(r,u,n){for(var m=-1,T=r.length;++m<T;){var C=r[m],v=u(C);if(v!=null&&(a===void 0?v===v&&!e(v):n(v,a)))var a=v,i=C}return i}return xe=t,xe}var Pe,je;function Nt(){if(je)return Pe;je=1;function e(t,r){return t>r}return Pe=e,Pe}var ke,Ge;function qt(){if(Ge)return ke;Ge=1;var e=it(),t=Nt(),r=nt();function u(n,m){return n&&n.length?e(n,r(m,2),t):void 0}return ke=u,ke}var Yt=qt();const Me=de(Yt);var Le,Ve;function Wt(){if(Ve)return Le;Ve=1;function e(t,r){return t<r}return Le=e,Le}var Se,Je;function Ft(){if(Je)return Se;Je=1;var e=it(),t=nt(),r=Wt();function u(n,m){return n&&n.length?e(n,t(m,2),r):void 0}return Se=u,Se}var Ht=Ft();const Qe=de(Ht);var Xt={left:"Start",right:"End",top:"Start",bottom:"End"};function Z(e){var t,r,u,n;if(e.tagName==="BODY")t=window.innerWidth,r=window.innerHeight,n=oe(ue(e).documentElement)||oe(e),u=ae(ue(e).documentElement)||ae(e);else{var m=ee(e);t=m.width,r=m.height,n=oe(e),u=ae(e)}return{width:t,height:r,scrollX:u,scrollY:n}}const Ut=(function(e){var t=e.placement,r=e.preventOverflow,u=e.padding;function n(v,a,i){if(!r)return 0;var o=Z(i),d=o.height,l=o.scrollY,b=v-u-l,g=v+u+a-l;return b<0?-b:g>d?d-g:0}function m(v,a,i){if(!r)return 0;var o=Z(i),d=o.scrollX,l=o.width,b=v-u-d,g=v+u+a-d;return b<0?-b:g>l?l-g:0}function T(v,a,i){if(!r)return i;var o=Z(v),d=o.scrollY,l=o.height;return a+i>l+d?l-a+d:Math.max(d,i)}function C(v,a,i){if(!r)return i;var o=Z(v),d=o.scrollX,l=o.width;return a+i>l+d?l-a+d:Math.max(d,i)}return{getPosition:function(a,i){var o=i.tagName==="BODY"?ee(a):Lt(a,i,!1);return o},getCursorOffsetPosition:function(a,i,o){var d=o.left,l=o.top,b=o.clientLeft,g=o.clientTop,h={left:d,top:l,width:10,height:10};if(F(a,"position")==="fixed")return h.left=b,h.top=g,h;if(i.tagName==="BODY")return h;var w={top:0,left:0};if(Be(i)!=="html"){var P=ee(i);P&&(w.top=P.top,w.left=P.left)}return w.top+=parseInt(F(i,"borderTopWidth"),10)-oe(i)||0,w.left+=parseInt(F(i,"borderLeftWidth"),10)-ae(i)||0,h.left=d-w.left,h.top=l-w.top,h},calcAutoPlacement:function(a,i,o){var d=Z(i),l=d.width,b=d.height,g=d.scrollX,h=d.scrollY,w=a.left-g-o.width,P=a.top-h-o.height,s=l-a.left-a.width+g-o.width,x=b-a.top-a.height+h-o.height,O=[{key:"left",value:w},{key:"right",value:s}],k=[{key:"top",value:P},{key:"bottom",value:x}],_="autoVertical",M="autoHorizontal",p,L;return t.indexOf(_)!==-1?(p=Me(k,function(E){return E.value}),t===_?p.key:""+p.key+t.replace(_,"")):t.indexOf(M)!==-1?(p=Me(O,function(E){return E.value}),t===M?p.key:""+p.key+t.replace(M,"")):(p=Me([].concat(k,O),function(E){return E.value}),p.key==="left"||p.key==="right"?L=Qe(k,function(E){return E.value}):L=Qe(O,function(E){return E.value}),""+p.key+Xt[L.key])},calcOverlayPosition:function(a,i,o,d){var l=d?this.getCursorOffsetPosition(i,o,d):this.getPosition(i,o),b=ee(a),g=b.height,h=b.width,w=l.top,P=l.left,s=t;t&&t.indexOf("auto")>=0&&(s=this.calcAutoPlacement(l,o,{height:g,width:h}));var x,O,k,_;if(s==="left"||s==="right"){O=l.top+(l.height-g)/2;var M=n(O,g,o);O+=M,_=50*(1-2*M/g)+"%",k=void 0}else if(s==="top"||s==="bottom"){x=P+(l.width-h)/2;var p=m(x,h,o);x+=p,k=50*(1-2*p/h)+"%",_=void 0}if((s==="top"||s==="topStart"||s==="topEnd")&&(O=T(o,g,l.top-g)),(s==="bottom"||s==="bottomStart"||s==="bottomEnd")&&(O=T(o,g,l.top+l.height)),(s==="left"||s==="leftStart"||s==="leftEnd")&&(x=C(o,h,l.left-h)),(s==="right"||s==="rightStart"||s==="rightEnd")&&(x=C(o,h,l.left+l.width)),document.dir==="rtl"&&(s==="left"||s==="leftStart"||s==="leftEnd"||s==="right"||s==="rightStart"||s==="rightEnd")){var L=Z(o),E=L.width;o.scrollWidth>E&&(x=E+x-o.scrollWidth)}if(s==="topStart"||s==="bottomStart")if(document.dir==="rtl"){var R=P+(l.width-h);x=R+m(R,h,o)}else x=P+m(P,h,o);if(s==="topEnd"||s==="bottomEnd")if(document.dir==="rtl")x=P+m(P,h,o);else{var N=P+(l.width-h);x=N+m(N,h,o)}if((s==="leftStart"||s==="rightStart")&&(O=w+n(w,g,o)),s==="leftEnd"||s==="rightEnd"){var U=w+(l.height-g);O=U+n(U,g,o)}return{positionLeft:x,positionTop:O,arrowOffsetLeft:k,arrowOffsetTop:_,positionClassName:"placement-"+Ot(s)}}}});var $t=function(t,r){var u=t.placement,n=u===void 0?"right":u,m=t.preventOverflow,T=m===void 0?!1:m,C=t.containerPadding,v=C===void 0?0:C,a=t.container,i=t.triggerTarget,o=t.followCursor,d=t.cursorPosition,l=f.useRef(null),b=f.useRef(null),g=f.useRef(),h={positionLeft:0,positionTop:0,arrowOffsetLeft:void 0,arrowOffsetTop:void 0},w=f.useState(h),P=w[0],s=w[1],x=f.useMemo(function(){return Ut({placement:n,preventOverflow:T,padding:v})},[n,T,v]),O=f.useCallback(function(k,_){if(k===void 0&&(k=!0),!!(i!=null&&i.current)){var M=te(i);if(!St(M))throw new Error("`target` should return an HTMLElement");if(!(M===b.current&&!k)){var p=te(r.current),L=kt(typeof a=="function"?a():a??null,ue(r.current).body),E=x.calcOverlayPosition(p,M,L,o?d:void 0);if(_&&p){var R,N=p==null||(R=p.className)===null||R===void 0||(R=R.match(/(placement-\S+)/))===null||R===void 0?void 0:R[0];mt(p,N),E.positionClassName&&gt(p,E.positionClassName),yt(p,{left:E.positionLeft+"px",top:E.positionTop+"px"})}else s(E);l.current=L,b.current=M}}},[a,r,i,x,o,d]);return f.useEffect(function(){O(!1);var k=te(r.current),_;if(l.current&&T){var M;_=ce(((M=l.current)===null||M===void 0?void 0:M.tagName)==="BODY"?window:l.current,"scroll",function(){return O(!0,!0)})}var p=ce(window,"resize",function(){return O(!0,!0)});return k&&(g.current=new pt(function(){return O(!0,!0)}),g.current.observe(k)),function(){var L,E;b.current=null,(L=_)===null||L===void 0||L.off(),p==null||p.off(),(E=g.current)===null||E===void 0||E.disconnect()}},[T,r,O]),_t(function(){return O()},[O,n]),[P,O]},De=I.forwardRef(function(e,t){var r=e.children,u=e.className,n=e.followCursor,m=e.cursorPosition,T=I.useRef(null),C=$t(e,T),v=C[0],a=C[1],i=v.positionClassName,o=v.arrowOffsetLeft,d=v.arrowOffsetTop,l=v.positionLeft,b=v.positionTop;if(f.useImperativeHandle(t,function(){return{get child(){return T.current},updatePosition:a}}),f.useEffect(function(){!n||!m||a()},[n,m,a]),typeof r=="function"){var g={className:rt(u,i),arrowOffsetLeft:o,arrowOffsetTop:d,left:l,top:b};return r(g,T)}return r});De.displayName="Position";De.propTypes={className:y.string,children:y.func.isRequired,container:y.oneOfType([y.func,y.any]),containerPadding:y.number,placement:y.any,preventOverflow:y.bool,triggerTarget:y.any};var At={container:y.any,children:y.any,childrenProps:y.object,className:y.string,containerPadding:y.number,placement:y.any,preventOverflow:y.bool,open:y.bool,rootClose:y.bool,transition:y.any,triggerTarget:y.any,onClose:y.func,onEnter:y.func,onEntering:y.func,onEntered:y.func,onExit:y.func,onExiting:y.func,onExited:y.func},Ie=I.forwardRef(function(e,t){var r=f.useContext(tt),u=r.overlayContainer,n=e.container,m=n===void 0?u:n,T=e.containerPadding,C=e.placement,v=e.rootClose,a=e.children,i=e.childrenProps,o=e.transition,d=o===void 0?ht:o,l=e.open,b=e.preventOverflow,g=e.triggerTarget,h=e.onClose,w=e.onExited,P=e.onExit,s=e.onExiting,x=e.onEnter,O=e.onEntering,k=e.onEntered,_=e.followCursor,M=e.cursorPosition,p=f.useState(!l),L=p[0],E=p[1],R=f.useRef(null);l?L&&E(!1):!d&&!L&&E(!0);var N=l||d&&!L,U=f.useCallback(function(A){E(!0),w==null||w(A)},[w]);if(Pt(h,{triggerTarget:g,overlayTarget:R,disabled:!v||!N}),!N)return null;var le={container:m,containerPadding:T,triggerTarget:g,placement:C,preventOverflow:b,followCursor:_,cursorPosition:M},$=function(ve,me){return I.createElement(De,W({},le,ve,{ref:be(t,me)}),function(K,fe){if(typeof a=="function")return a(Object.assign(K,i),be(fe,R));var ge=K.left,z=K.top,re=K.className;return I.cloneElement(a,W({},i,a.props,{className:rt(re,a.props.className),style:W({left:ge,top:z},a.props.style),ref:be(fe,R)}))})};return d?I.createElement(d,{in:l,transitionAppear:!0,onExit:P,onExiting:s,onExited:U,onEnter:x,onEntering:O,onEntered:k},$):$()});Ie.displayName="Overlay";Ie.propTypes=At;var Kt=["children","container","controlId","defaultOpen","trigger","disabled","followCursor","readOnly","plaintext","open","delay","delayOpen","delayClose","enterable","placement","speaker","rootClose","onClick","onMouseOver","onMouseMove","onMouseOut","onContextMenu","onFocus","onBlur","onOpen","onClose","onExited"];function zt(e,t){e===void 0&&(e={}),t===void 0&&(t={});var r={};return Object.keys(e).forEach(function(u){if(e[u]){var n;r[u]=Y(e[u],(n=t)===null||n===void 0?void 0:n[u])}}),r}var _e=(function(e){return e[e.ClickOutside=0]="ClickOutside",e[e.ImperativeHandle=1]="ImperativeHandle",e})({});function Ze(e,t,r){var u=t.currentTarget,n=t.relatedTarget||vt(t,["nativeEvent","toElement"]);(!n||n!==u)&&!Re(u,n)&&e(t,r)}var jt=["hover","focus"],Gt=I.forwardRef(function(e,t){var r=f.useContext(tt),u=r.overlayContainer,n=e.children,m=e.container,T=m===void 0?u:m,C=e.controlId,v=e.defaultOpen,a=e.trigger,i=a===void 0?jt:a,o=e.disabled,d=e.followCursor,l=e.readOnly,b=e.plaintext,g=e.open,h=e.delay,w=e.delayOpen,P=e.delayClose,s=e.enterable,x=e.placement,O=x===void 0?"bottomStart":x,k=e.speaker,_=e.rootClose,M=_===void 0?!0:_,p=e.onClick,L=e.onMouseOver,E=e.onMouseMove,R=e.onMouseOut,N=e.onContextMenu,U=e.onFocus,le=e.onBlur,$=e.onOpen,A=e.onClose,ve=e.onExited,me=dt(e,Kt),K=Et({container:T}),fe=K.Portal,ge=K.target,z=f.useRef(null),re=f.useRef(),Ne=wt(g,v),q=Ne[0],qe=Ne[1],Ye=f.useState(null),ot=Ye[0],We=Ye[1],j=f.useRef(null),D=f.useRef(null),Fe=X(w)?h:w,He=X(P)?h:P,pe=f.useRef(!1),he=f.useRef(!1);f.useEffect(function(){return function(){X(j.current)||clearTimeout(j.current),X(D.current)||clearTimeout(D.current)}},[]);var Ee=f.useRef(!1),V=f.useCallback(function(c,S){c!==q&&(c?$==null||$():A==null||A(S),qe(c))},[q,$,A,qe]),ne=f.useCallback(function(c){var S=Ke(c)?Fe:c;if(S&&typeof S=="number")return j.current=setTimeout(function(){j.current=null,Ee.current&&V(!0)},S);V(!0)},[Fe,V]),G=f.useCallback(function(c,S){var B=Ke(c)?He:c;if(B&&typeof B=="number")return D.current=setTimeout(function(){D.current=null,V(!1,S)},B);V(!1,S)},[He,V]),at=f.useCallback(function(){We(null)},[]);f.useImperativeHandle(t,function(){return{get root(){return z.current},get overlay(){var c;return(c=re.current)===null||c===void 0?void 0:c.child},getState:function(){return{open:q}},open:ne,close:function(S){return G(S,_e.ImperativeHandle)},updatePosition:function(){var S,B;(S=re.current)===null||S===void 0||(B=S.updatePosition)===null||B===void 0||B.call(S)}}});var J=f.useCallback(function(){!pe.current&&!he.current&&G(void 0,_e.ClickOutside)},[G]),Q=f.useCallback(function(){if(Ee.current=!0,!s)return ne();if(he.current=!0,!X(D.current))return clearTimeout(D.current),D.current=null,ne();q||ne()},[s,q,ne]),ye=f.useCallback(function(){q?J():Q()},[q,J,Q]),Oe=f.useCallback(function(){if(Ee.current=!1,!s)return G();if(he.current=!1,!X(j.current)){clearTimeout(j.current),j.current=null;return}!q||!X(D.current)||(D.current=setTimeout(function(){X(D.current)||(clearTimeout(D.current),D.current=null),J()},200))},[s,q,G,J]),ut=f.useCallback(function(){pe.current=!0},[]),lt=f.useCallback(function(){pe.current=!1,!H("click",i)&&!H("contextMenu",i)&&!H("active",i)&&J()},[J,i]),Xe=f.useCallback(function(c){We(function(){return{top:c.pageY,left:c.pageX,clientTop:c.clientX,clientLeft:c.clientY}})},[]),Ue=f.useCallback(function(c){c.preventDefault()},[]),se=f.useMemo(function(){var c={onClick:p,onContextMenu:N,onMouseOver:L,onMouseOut:R,onFocus:U,onBlur:le,onMouseMove:E};if(o||l||b||i==="none")return c;if(d&&(c.onMouseMove=Y(Xe,E)),H("click",i))return c.onClick=Y(ye,c.onClick),c;if(H("active",i))return c.onClick=Y(Q,c.onClick),c;if(H("hover",i)){var S=function(ie){return Ze(Q,ie)},B=function(ie){return Ze(Oe,ie)};c.onMouseOver=Y(S,c.onMouseOver),c.onMouseOut=Y(B,c.onMouseOut)}return H("focus",i)&&(c.onFocus=Y(Q,c.onFocus),c.onBlur=Y(Oe,c.onBlur)),H("contextMenu",i)&&(c.onContextMenu=Y(Ue,ye,c.onContextMenu)),c},[o,d,Oe,Q,ye,Xe,le,p,N,U,E,R,L,b,Ue,l,i]),ft=function(){var S=W({},me,{rootClose:M,triggerTarget:z,onClose:i!=="none"?function(){return G(void 0,_e.ClickOutside)}:void 0,onExited:Y(d?at:void 0,ve),placement:O,container:ge,open:q}),B={id:C};return i!=="none"&&s&&(B.onMouseEnter=ut,B.onMouseLeave=lt),I.createElement(Ie,W({},S,{ref:re,childrenProps:B,followCursor:d,cursorPosition:ot}),typeof k=="function"?function(Ce,ie){return k(W({},Ce,{onClose:G}),ie)}:k)},st=f.useMemo(function(){return typeof n=="function"?n(se,z):bt(n)||!f.isValidElement(n)?I.createElement("span",W({ref:z,"aria-describedby":C},se),n):f.cloneElement(n,W({ref:z,"aria-describedby":C},zt(se,n.props)))},[n,C,se]);return I.createElement(I.Fragment,null,st,I.createElement(fe,null,ft()))});Gt.displayName="OverlayTrigger";export{Gt as O,Ke as a,ae as b,_e as c,Lt as g,X as i,dr as p,oe as s,_t as u};
